[gd_scene load_steps=5 format=3 uid="uid://bpv4o2v0qf12g"]

[ext_resource type="Script" uid="uid://1w4c16l4x4w1" path="res://vfx/projectiles/ice_shard.gd" id="1_script"]
[ext_resource type="PackedScene" path="res://vfx/impacts/frost_shatter.tscn" id="2_impact"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_trail"]
particle_flag_disable_z = true
direction = Vector3(-1, 0, 0)
spread = 15.0
initial_velocity_min = 40.0
initial_velocity_max = 80.0
gravity = Vector3(0, 0, 0)
damping_min = 2.0
damping_max = 3.0
scale_min = 0.2
scale_max = 0.5
color = Color(0.878, 0.949, 0.996, 0.8)

[sub_resource type="CircleShape2D" id="CircleShape2D_hitbox"]

[node name="IceShard" type="Node2D" groups=["projectile"]]
position = Vector2(104, 115)
script = ExtResource("1_script")
impact_effect = ExtResource("2_impact")

[node name="Visual" type="Node2D" parent="."]

[node name="OuterGlow" type="Polygon2D" parent="Visual"]
color = Color(0.231, 0.51, 0.965, 0.3)
polygon = PackedVector2Array(20, 0, 12, -6, -8, -8, -14, 0, -8, 8, 12, 6)

[node name="MidLayer" type="Polygon2D" parent="Visual"]
color = Color(0.024, 0.714, 0.831, 0.6)
polygon = PackedVector2Array(16, 0, 8, -4, -6, -5, -10, 0, -6, 5, 8, 4)

[node name="Core" type="Polygon2D" parent="Visual"]
color = Color(0.878, 0.949, 0.996, 1)
polygon = PackedVector2Array(12, 0, 4, -2, -4, -2, -6, 0, -4, 2, 4, 2)

[node name="Trail" type="GPUParticles2D" parent="."]
amount = 18
lifetime = 0.35
process_material = SubResource("ParticleProcessMaterial_trail")

[node name="Glow" type="PointLight2D" parent="."]
color = Color(0.376, 0.647, 0.98, 1)
energy = 1.2
texture_scale = 1.5

[node name="Hitbox" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
shape = SubResource("CircleShape2D_hitbox")
